<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>plasTeX — A Python Framework for Processing LaTeX Documents: The Document Context</title>

<link href="sec-packages.html" title="Packages" rel="next" />
<link href="sec-inimacros.html" title="INI Files" rel="prev" />
<link href="sect0009.html" title="Defining Macros in Python" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sec-inimacros.html" title="INI Files"><img alt="Previous: INI Files" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0009.html" title="Defining Macros in Python"><img alt="Up: Defining Macros in Python" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-packages.html" title="Packages"><img alt="Next: Packages" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html">plasTeX — A Python Framework for Processing LaTeX Documents</a> <b>:</b>
</span>

</span><span>
<span>
<a href="sec-macros.html">Understanding Macros and Packages</a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0009.html">Defining Macros in Python</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">The Document Context</b>
</span>
</span>
<hr />
</div>

<div><h2 id="sec:contextmacros">4.2.3 The Document Context</h2>
<p>It is possible to define commands using the same interface that is used by the plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X engine itself. This interface belongs to the <tt class="ttfamily">Context</tt> object (usually accessed through the document object’s <tt class="ttfamily">context</tt> attribute). Defining commands using the context object is generally done in the <tt class="ttfamily">ProcessOptions</tt> function of a package. The following methods of the context object create new commands. <center><table cellspacing="0" class="tabular">
<tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><b class="bf">Method</b></p></td>

    
    <td style="text-align:left"><p><b class="bf">Purpose</b> </p></td>

</tr><tr>

    
    <td style="border-top-style:solid; text-align:left; border-top-color:black; border-top-width:1px; border-right:1px solid black"><p> <tt class="ttfamily">newcounter</tt></p></td>

    
    <td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left"><p>creates a new counter, and also creates a command called \<tt class="ttfamily">the<i class="it">counter</i></tt> which generates the formatted version of the counter. This macro corresponds to the \<tt class="ttfamily">newcounter</tt> macro in L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newcount</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newcount</tt> command.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newdimen</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newdimen</tt> command.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newskip</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newskip</tt> command.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newmuskip</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newmuskip</tt> command.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newif</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newif</tt> command. This command also generates macros for \<tt class="ttfamily"><i class="it">ifcommand</i>true</tt> and \<tt class="ttfamily"><i class="it">ifcommand</i>false</tt>.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newcommand</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newcommand</tt> macro.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newenvironment</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">newenvironment</tt> macro.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">newdef</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">def</tt> command.</p></td>

</tr><tr>

    
    <td style="text-align:left; border-right:1px solid black"><p><tt class="ttfamily">chardef</tt></p></td>

    
    <td style="text-align:left"><p>corresponds to T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s \<tt class="ttfamily">chardef</tt> command.</p></td>

</tr>
</table></center> </p><p><b class="bf">Note:</b> Since many of these methods accept strings containing L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X  markup, you need to remember that the category codes of some characters can be changed during processing. If you are defining macros using these methods in the <tt class="ttfamily">ProcessOptions</tt> function in a package, you should be safe since this function is executed in the preamble of the document where category codes are not changed frequently. However, if you define a macro with this interface in a context where the category codes are not set to the default values, you will have to adjust the markup in your macros accordingly. </p><p>Below is an example of using this interface within the context of a package to define some commands. For the full usage of these methods see the API documentation of the <tt class="ttfamily">Context</tt> object in section <a href="module-plasTeX-Context.html">6.5</a>. </p><pre>
def ProcessOptions(options, document):
    context = document.context

    # Create some counters
    context.newcounter('secnumdepth', initial=3)
    context.newcounter('tocdepth', initial=2)

    # \newcommand{\config}[2][general]{\textbf{#2:#1}
    context.newcommand('config', 2, r'\textbf{#2:#1}', opt='general')

    # \newenvironment{note}{\textbf{Note:}}{}
    context.newenvironment('note', 0, (r'\textbf{Note:}', r''))
</pre></div>





<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sec-inimacros.html" title="INI Files"><img alt="Previous: INI Files" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0009.html" title="Defining Macros in Python"><img alt="Up: Defining Macros in Python" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-packages.html" title="Packages"><img alt="Next: Packages" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<script language="javascript" src="icons/imgadjust.js" type="text/javascript"></script>

</body>
</html>