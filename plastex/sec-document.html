<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>plasTeX — A Python Framework for Processing LaTeX Documents: The plasTeX Document</title>

<link href="sec-sections.html" title="Sections" rel="next" />
<link href="sec-config-images.html" title="Image Options" rel="prev" />
<link href="index.html" title="plasTeX — A Python Framework for Processing LaTeX Documents" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sec-config-images.html" title="Image Options"><img alt="Previous: Image Options" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="index.html" title="plasTeX — A Python Framework for Processing LaTeX Documents"><img alt="Up: plasTeX — A Python Framework for Processing LaTeX Documents" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-sections.html" title="Sections"><img alt="Next: Sections" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html">plasTeX — A Python Framework for Processing LaTeX Documents</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document</b>
</span>
</span>
<hr />
</div>

<div><h1 id="sec:document">3 The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document</h1>
<p>The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document is very similar to an XML DOM structure. In fact, you can use XML DOM methods to create and populate nodes, delete or move nodes, etc. The biggest difference between the plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document and an XML document is that in XML the attributes of an element are simply string values, whereas attributes in a plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document are generally document fragments that contain the arguments of a macro. Attributes can be canfigured to hold other Python objects like lists, dictionaries, and strings as well (see the section <a href="sec-macros.html">4</a> for more information). </p><p>While XML document objects have a very strict syntax, L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X documents are a little more free-form. Because of this, the plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X framework does a lot of normalizing of the L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document to make it conform to a set of rules. This set of rules means that you will always get a consistent output document which is necessary for easy manipulation and programability. </p><p>The overall document structure should not be surprising. There is a document element at the top level which corresponds to the XML Document node. The child nodes of the Document node begin with the preamble to the L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document. This includes things like the \<tt class="ttfamily">documentclass</tt>, \<tt class="ttfamily">newcommand</tt>s, \<tt class="ttfamily">title</tt>, \<tt class="ttfamily">author</tt>, counter settings, etc. For the most part, these nodes can be ignored. While they are a useful part of the document, they are generally only used by internal processes in plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X. What is important is the last node in the document which corresponds to L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s <tt class="ttfamily">document</tt> environment. </p><p>The <tt class="ttfamily">document</tt> environment has a very simple structure. It consists solely of paragraphs (actually \<tt class="ttfamily">par</tt>s in T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s terms) and sections<a href="#a0000001335" class="footnote"><sup class="footnotemark">1</sup></a>. In fact, all sections have this same format including parts, chapters, sections, subsections, subsubsections, paragraphs, and subparagraphs. plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X can tell which pieces of a document correspond to a sectioning element by looking at the <tt class="ttfamily">level</tt> attribute of the Python class that corresponds to the given macro. The section levels in plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X are the same as those used by L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X: -1 for part, 0 for chapter, 1 for section, etc. You can create your own sectioning commands simply by subclassing an existing macro class, or by setting the <tt class="ttfamily">level</tt> attribute to a value that corresponds to the level of section you want to mimic. All level values less than 100 are reserved for sectioning so you aren’t limited to L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s sectioning depth. Figure <a href="sec-document.html#fig:docstructure">3.1</a> below shows an example of the overall document structure. </p><div id="fig:docstructure" class="figure"><center> 
<img src="images/img-0001.png" alt="\includegraphics[width=4in]{docstructure}" style="width:4in" /> </center><div class="caption"><b>Figure 3.1</b>: <span>The overall plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document structure</span></div></div><p>This document is constructed during the parsing process by calling the <tt class="ttfamily">digest</tt> method on each node. The <tt class="ttfamily">digest</tt> method is passed an iterator of document nodes that correspond to the nodes in the document that follow the current node. It is the responsibility of the current node to only absorb the nodes that belong to it during the digest process. Luckily, the default <tt class="ttfamily">digest</tt> method will work in nearly all cases. See section <a href="sec-macros.html">4</a> for more information on the digestion process. </p><p>Part of this digestion process is grouping nodes into paragraphs. This is done using the <tt class="ttfamily">paragraphs</tt> method available in all <tt class="ttfamily">Macro</tt> based classes. This method uses the same technique as T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X to group paragraphs of content. Section <a href="sec-paragraphs.html">3.2</a> has more information about the details of paragraph grouping. </p><p>In addition to the <tt class="ttfamily">level</tt> attribute of sections, there is also a mixin class that assists in generating the table of contents and navigation elements during rendering. If you create your own sectioning commands, you should include <tt class="ttfamily">plasTeX.Base.LaTeX.Sectioning.SectionUtils</tt> as a base class as well. All of the standard L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X section commands already inherit from this class, so if you subclass one of those, you’ll get the helper methods for free. For more information on these helper methods see section <a href="sec-sections.html">3.1</a>. </p><p>The structure of the rest of the document is also fairly simple and well-defined. L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X commands are each converted into a document node with it’s arguments getting placed into the <tt class="ttfamily">attributes</tt> dictionary. L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X environments also create a single node in the document, where the child nodes of the environment include everything between the \<tt class="ttfamily">begin</tt> and \<tt class="ttfamily">end</tt> commands. By default, the child nodes of an environment are simply inserted in the order that they appear in the document. However, there are some environments that require further processing due to their more complex structures. These structures include arrays and tabular environments, as well as itemized lists. For more information on these structures see sections <a href="sec-arrays.html">3.3.3</a> and <a href="sec-lists.html">3.3.1</a>, respectively. Figures <a href="sec-document.html#fig:docfragcode">3.2</a> and <a href="sec-document.html#fig:docfrag">3.3</a> shows a common L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document fragment and the resulting plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document node structure. </p><div id="fig:docfragcode" class="figure"><pre>
\begin{center}
Every \textbf{good} boy does \textit{fine}.
\end{center}
</pre><div class="caption"><b>Figure 3.2</b>: <span>Sample L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document fragment code</span></div></div><div id="fig:docfrag" class="figure"><center> 
<img src="images/img-0002.png" alt="\includegraphics[width=3in]{docfrag}" style="width:3in" /> </center><div class="caption"><b>Figure 3.3</b>: <span>Resulting plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document node structure</span></div></div><p>You may have noticed that in the document structure in Figure <a href="sec-document.html#fig:docfrag">3.3</a> the text corresponding to the argument for \<tt class="ttfamily">textbf</tt> and \<tt class="ttfamily">textit</tt> is actually a child node and not an attribute. This is actually a convenience feature in plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X. For macros like this where there is only one argument and that argument corresponds to the content of the macro, it is common to put that content into the child nodes. This is done in the <tt class="ttfamily">args</tt> attribute of the macro class by setting the argument’s name to “self”. This magical value will link the attribute called “self” to the child nodes array. For more information on the <tt class="ttfamily">args</tt> attribute and how it populates the <tt class="ttfamily">attributes</tt> dictionary see section <a href="sec-macros.html">4</a>. </p><p>In the plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X framework, the input L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document is parsed and digested until the document is finished. At this point, you should have an output document that conforms to the rules described above. The document should have a regular enough structure that working with it programatically using DOM methods or Python practices should be fairly straight-forward. The following sections give more detail on document structure elements that require extra processing beyond the standard parse-digest process. </p></div>

<div class="contents chapter-contents"><!--<strong>Subsections</strong>-->
<ul>
<li><a href="sec-sections.html">3.1 Sections</a>
   <ul>
   <li><a href="sec-links.html">3.1.1 Navigation and Links</a>
       
   </li><li><a href="sec-tableofcontents.html">3.1.2 Table of Contents</a>
       
   </li>
   </ul>
</li><li><a href="sec-paragraphs.html">3.2 Paragraphs</a>
   
</li><li><a href="sec-complexdoc.html">3.3 Complex Structures</a>
   <ul>
   <li><a href="sec-lists.html">3.3.1 Lists</a>
       
   </li><li><a href="sect0006.html">3.3.2 Bibliography</a>
       
   </li><li><a href="sec-arrays.html">3.3.3 Arrays and Tabular Environments</a>
       
   </li><li><a href="sect0007.html">3.3.4 Indexes</a>
       
   </li>
   </ul>
</li>



</ul>
</div>

<div id="footnotes">
<p><b>Footnotes</b></p>
<ol>
<li id="a0000001335">“sections” in this document is used loosely to mean any type of section: part, chapter, section, etc.</li>
</ol>
</div>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sec-config-images.html" title="Image Options"><img alt="Previous: Image Options" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="index.html" title="plasTeX — A Python Framework for Processing LaTeX Documents"><img alt="Up: plasTeX — A Python Framework for Processing LaTeX Documents" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-sections.html" title="Sections"><img alt="Next: Sections" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<script language="javascript" src="icons/imgadjust.js" type="text/javascript"></script>

</body>
</html>