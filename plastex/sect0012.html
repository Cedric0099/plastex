<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="plasTeX" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<title>plasTeX — A Python Framework for Processing LaTeX Documents: Extending the Simple Renderer</title>

<link href="sec-renderable.html" title="Renderable Objects" rel="next" />
<link href="sect0011.html" title="Simple Renderer Example" rel="prev" />
<link href="sect0011.html" title="Simple Renderer Example" rel="up" />
<link rel="stylesheet" href="styles/styles.css" />
</head>
<body>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0011.html" title="Simple Renderer Example"><img alt="Previous: Simple Renderer Example" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0011.html" title="Simple Renderer Example"><img alt="Up: Simple Renderer Example" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-renderable.html" title="Renderable Objects"><img alt="Next: Renderable Objects" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<div class="breadcrumbs">
<span>
<span>
<a href="index.html">plasTeX — A Python Framework for Processing LaTeX Documents</a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0010.html">Renderers</a> <b>:</b>
</span>

</span><span>
<span>
<a href="sect0011.html">Simple Renderer Example</a> <b>:</b>
</span>

</span><span>

<span>
<b class="current">Extending the Simple Renderer</b>
</span>
</span>
<hr />
</div>

<div><h2 id="a0000003137">5.1.1 Extending the Simple Renderer</h2>
<p>Now that we have a simple renderer working, it is very simple to extend it to do more specific operations. Let’s say that the default renderer is fine for most nodes, but for the \<tt class="ttfamily">section</tt> node we want to do something special. For the section node, we want the title argument to correspond to the title attribute in the output XML<a href="#a0000003141" class="footnote"><sup class="footnotemark">1</sup></a>. To do this we need a method like the following. </p><pre>
def handle_section(node):
    return u'\n\n&lt;%s title="%s"&gt;\n%s\n&lt;/%s&gt;\n' % \
            (node.nodeName, unicode(node.attributes['title']), 
             unicode(node), node.nodeName)
</pre><p>Now we simply insert the rendering method into the renderer under the appropriate key. Remember that the key in the renderer should match the name of the node you want to render. Since the above rendering method will work for all section types, we’ll insert it into the renderer for each L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X sectioning command. </p><pre>
renderer = Renderer()
renderer['section'] = handle_section
renderer['subsection'] = handle_section
renderer['subsubsection'] = handle_section
renderer['paragraph'] = handle_section
renderer['subparagraph'] = handle_section
renderer.render(document)
</pre><p>Running the same L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X document as in the previous example, we now get this output. </p><pre>
&lt;document&gt;
&lt;par&gt;
Previous paragraph.
&lt;/par&gt;

&lt;section title="My Section"&gt;
&lt;par&gt;
&lt;center&gt;
 Centered text with &amp;lt;, &amp;gt;, and &amp;amp; charaters.
&lt;/center&gt;
&lt;/par&gt;&lt;par&gt;
Next paragraph.
&lt;/par&gt;
&lt;/section&gt;

&lt;/document&gt;
</pre><p>Of course, you aren’t limited to using just Python methods. Any function that accepts a node as an argument can be used. The Zope Page Template (ZPT) renderer included with plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X is an example of how to write a renderer that uses a templating language to render the nodes (see section <a href="sec-zpt.html">5.3</a>). </p></div>



<div id="footnotes">
<p><b>Footnotes</b></p>
<ol>
<li id="a0000003141">This will only work properly in XML if the content of the title is plain text since other nodes will generate markup.</li>
</ol>
</div>

<div class="navigation">
<table cellspacing="2" cellpadding="0" width="100%">
<tr>
<td><a href="sect0011.html" title="Simple Renderer Example"><img alt="Previous: Simple Renderer Example" border="0" src="icons/previous.gif" width="32" height="32" /></a></td>

<td><a href="sect0011.html" title="Simple Renderer Example"><img alt="Up: Simple Renderer Example" border="0" src="icons/up.gif" width="32" height="32" /></a></td>

<td><a href="sec-renderable.html" title="Renderable Objects"><img alt="Next: Renderable Objects" border="0" src="icons/next.gif" width="32" height="32" /></a></td>

<td class="navtitle" align="center">plasTeX — A Python Framework for Processing LaTeX Documents</td>
<td><a href="index.html" title="Table of Contents"><img border="0" alt="" src="icons/contents.gif" width="32" height="32" /></a></td>

<td><a href="sect0050.html" title="Index"><img border="0" alt="" src="icons/index.gif" width="32" height="32" /></a></td>

<td><img border="0" alt="" src="icons/blank.gif" width="32" height="32" /></td>
</tr>
</table>
</div>

<script language="javascript" src="icons/imgadjust.js" type="text/javascript"></script>

</body>
</html>